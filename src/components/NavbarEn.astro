---
import {Icon} from 'astro-icon/components';
const currentPath = Astro.url.pathname;
const isHome = currentPath === '/en/home' || currentPath === '/es/home';
const isProjects = currentPath === '/en/projects' || currentPath === '/es/projects';
const isEducation = currentPath === '/en/education' || currentPath === '/es/education';
const isContact = currentPath === '/en/contact' || currentPath === '/es/contact';


---

<div class="absolute top-0 right-0 m-4 text-purple-500">
    <button id="languageButton" class="flex">
        <Icon name="streamline-emojis:spain" class="scale-150"/>
    </button>
</div>
<div id="navbar" class="flex justify-center">
    <nav class="flex justify-between items-center py-4 w-full max-w-4xl">
        <ul class="flex items-center list-none gap-4">
            <li>
                <a href="/en/home" class={`text-2xl font-bold hover:bg-gradient-to-r from-purple-300 to-purple-700 hover:bg-clip-text hover:text-transparent ${isHome ? 'bg-gradient-to-r from-purple-300 to-purple-700 bg-clip-text text-transparent' : 'text-white'}`}>Home</a>
            </li>
            <li>
                <a href="/en/projects" class={`font-bold hover:bg-gradient-to-r from-purple-300 to-purple-700 hover:bg-clip-text hover:text-transparent ${isProjects ? 'bg-gradient-to-r from-purple-300 to-purple-700 bg-clip-text text-transparent' : 'text-white'}`}>Projects</a>
            </li>
            <li>
                <a href="/en/education" class={`font-bold hover:bg-gradient-to-r from-purple-300 to-purple-700 hover:bg-clip-text hover:text-transparent ${isEducation ? 'bg-gradient-to-r from-purple-300 to-purple-700 bg-clip-text text-transparent' : 'text-white'}`}>Education</a>
            </li>
            <li>
                <a href="/en/contact" class={`font-bold hover:bg-gradient-to-r from-purple-300 to-purple-700 hover:bg-clip-text hover:text-transparent ${isContact ? 'bg-gradient-to-r from-purple-300 to-purple-700 bg-clip-text text-transparent' : 'text-white'}`}>Contact</a>
            </li>
        </ul>
    </nav>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.addEventListener('click', function(event) {
            const target = event.target.closest('#languageButton');
            if (target) {
                const currentPath = window.location.pathname;
                const isEnglish = currentPath.startsWith('/en/');
                const newPath = isEnglish 
                    ? currentPath.replace('/en/', '/es/') 
                    : currentPath.replace('/es/', '/en/');
                window.location.href = newPath;
            }
        });
    });
</script>